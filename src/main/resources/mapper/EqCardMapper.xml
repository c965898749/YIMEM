<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sy.mapper.game.EqCardMapper">
    <select id="selectByid" resultType="com.sy.model.game.EqCard">
    select
  *
    from eq_card
    where id = #{id}
  </select>
    <select id="selectByStr" resultType="com.sy.model.game.EqCard">
        SELECT * from eq_card
        WHERE 1=1  <!-- 万能拼接条件，解决WHERE语法风险 -->
        <if test="str != null and str != ''">
            <choose>
                <!-- 分支1：str=1 → 1~3星（闭区间，包含1和3） -->
                <when test="str == '1'">
                    AND star BETWEEN 1 AND 3
                </when>
                <!-- 分支2：str=2 → 3~4星（解决断层，不重叠，包含3和4） -->
                <when test="str == '2'">
                    AND star BETWEEN 3 AND 4
                </when>
                <!-- 分支3：str=3 → 4~4.5星（闭区间，包含4和4.5） -->
                <when test="str == '3'">
                    AND star BETWEEN 4 AND 4.5
                </when>
                <!-- 兜底分支：str为其他值时，查询全部数据，避免SQL报错 -->
                <otherwise>
                    AND 1=1
                </otherwise>
            </choose>
        </if>
    </select>
</mapper>