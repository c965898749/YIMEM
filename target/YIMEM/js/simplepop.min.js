"use strict";var SimplePop={alert:function(t,i){var e={popType:"alert",title:"提示",content:"<div class='layer_msg'><p>"+(void 0===t?"":t)+"</p><button id='simplePopBtnSure' type='button'>确定</button></div>",callback:function(){}},o=$.extend({},this._defaults,e,i);this._creatLayer(o)},confirm:function(t,i){var e={popType:"confirm",title:"请选择",content:"<div class='layer_msg'><p>"+(void 0===t?"":t)+"</p><button id='simplePopBtnSure' type='button'>确定</button><button id='SimplePopBtncancel' type='button'>取消</button></div>",cancel:function(){},confirm:function(){}},o=$.extend({},this._defaults,e,i);this._creatLayer(o)},prompt:function(t,i){var e={popType:"prompt",title:"请输入",content:"<div class='layer_msg'><p>"+(void 0===t?"":t)+"</p><div><input type='text' /></div><button id='simplePopBtnSure' type='button'>确定</button><button id='SimplePopBtncancel' type='button'>取消</button></div>",cancel:function(){},confirm:function(){}},o=$.extend({},this._defaults,e,i);this._creatLayer(o)},closeSimplePop:function(){this._closeLayer()},_defaults:{icon:"",title:"",content:"",width:0,height:0,background:"#000",opacity:.5,duration:"normal",showTitle:!0,escClose:!0,popMaskClose:!1,drag:!0,dragOpacity:1,popType:"alert",type:"info"},_creatLayer:function(t){var i=this;$(".popMask").empty().remove(),$(".popMain").empty().remove(),$("body").append("<div class='popMask'></div>");var e=$(".popMask");e.css({"background-color":t.background,filter:"alpha(opacity="+100*t.opacity+")","-moz-opacity":t.opacity,opacity:t.opacity}),t.popMaskClose&&e.bind("click",function(){i._closeLayer()}),t.escClose&&$(document).bind("keyup",function(t){try{27==t.keyCode&&i._closeLayer()}catch(e){i._closeLayer()}}),e.fadeIn(t.duration);var o="<div class='popMain'>";o+="<div class='popTitle'>"+(void 0!==t.icon&&""!==t.icon?"<img class='icon' src='"+t.icon+"' />":"")+"<span class='text'>"+t.title+"</span><span class='close'>&times;</span></div>",o+="<div class='popContent'>"+t.content+"</div>",o+="</div>",$("body").append(o);var n=$(".popMain");n.find(".layer_msg").addClass(t.type+"_icon");var p=$(".popTitle"),a=$(".popContent");switch(t.showTitle?p.show():p.hide(),0!==t.width&&p.width(t.width),$(".popTitle .close").bind("click",function(){e.fadeOut(t.duration),n.fadeOut(t.duration),n.attr("isClose","1"),"container"==t.type&&$(t.targetId).empty().append(t.content)}),0!==t.width&&a.width(t.width),0!==t.height&&a.height(t.height),n.css({left:$(window).width()/2-n.width()/2+"px",top:$(window).height()/2-n.height()/2+"px"}),$(window).resize(function(){n.css({left:$(window).width()/2-n.width()/2+"px",top:$(window).height()/2-n.height()/2+"px"})}),t.drag&&this._drag(t.dragOpacity),t.popType){case"alert":n.fadeIn(t.duration,function(){n.attr("style",n.attr("style").replace("FILTER:",""))}),$("#simplePopBtnSure").bind("click",function(){t.callback(),i._closeLayer()});break;case"confirm":n.fadeIn(t.duration,function(){n.attr("style",n.attr("style").replace("FILTER:",""))}),$("#simplePopBtnSure").bind("click",function(){t.confirm(),i._closeLayer()}),$("#SimplePopBtncancel").bind("click",function(){t.cancel(),i._closeLayer()});break;case"prompt":n.fadeIn(t.duration,function(){n.attr("style",n.attr("style").replace("FILTER:",""))}),$("#simplePopBtnSure").bind("click",function(){t.confirm($(".layer_msg input").val()),i._closeLayer()}),$("#SimplePopBtncancel").bind("click",function(){t.cancel(),i._closeLayer()})}},_closeLayer:function(){$(".popTitle .close").triggerHandler("click")},_drag:function(t){var i,e,o=!1;$(".popTitle").bind("mousedown",function(t){$(".popMain:visible").length>0&&(o=!0,i=t.pageX-parseInt($(".popMain").css("left"),10),e=t.pageY-parseInt($(".popMain").css("top"),10),$(".popTitle").css({cursor:"move"}))}),$(document).bind("mousemove",function(n){if(o&&$(".popMain:visible").length>0){1!=t&&$(".popMain").fadeTo(0,t);var p=n.pageX-i;n=n.pageY-e,0>p&&(p=0),p>$(window).width()-$(".popMain").width()&&(p=$(window).width()-$(".popMain").width()-2),0>n&&(n=0),n>$(window).height()-$(".popMain").height()&&(n=$(window).height()-$(".popMain").height()-2),$(".popMain").css({top:n,left:p})}}).bind("mouseup",function(){$(".popMain:visible").length>0&&(o=!1,1!=t&&$(".popMain").fadeTo(0,1),$(".popTitle").css({cursor:"auto"}))})}};